import{_ as h}from"./preload-helper-41c905a7.js";import{U as d}from"./request-fc61835a.js";import{a as n}from"./Error-685fdf30.js";import{e as b}from"./ItemCache-c0904c4f.js";import{r as m,c as w}from"./typedArrayUtil-ce39e5f4.js";import{F as v,a as z}from"./aaBoundingBox-04c58f5a.js";import{t as _,c as g}from"./symbolLayerUtils3D-51cc6d75.js";import"./string-7a324480.js";import"./promiseUtils-e37fe75d.js";import"./MemCache-1d0e264b.js";import"./cast-8b575ab3.js";import"./ArrayPool-5813d861.js";import"./nextTick-3ee5a785.js";import"./Extent-680ef92a.js";import"./Ellipsoid-89682c5e.js";import"./aaBoundingRect-41e05474.js";import"./mathUtils-5b623c84.js";import"./vec3-015ca254.js";import"./common-d0b63c2d.js";import"./vec4-c7a19f0d.js";let s=a();function a(){return new b(50)}function K(){s=a()}function M(r,e){if(r.type==="icon")return p(r,e);if(r.type==="object")return f(r,e);throw new n("symbol3d:unsupported-symbol-layer","computeLayerSize only works with symbol layers of type Icon and Object")}async function N(r,e){if(r.type==="icon")return j(r,e);if(r.type==="object")return B(r,e);throw new n("symbol3d:unsupported-symbol-layer","computeLayerSize only works with symbol layers of type Icon and Object")}async function p(r,e){var t,i;if((t=r.resource)!=null&&t.href)return L(r.resource.href).then(o=>[o.width,o.height]);if((i=r.resource)!=null&&i.primitive)return m(e)?[e,e]:[256,256];throw new n("symbol3d:invalid-symbol-layer","symbol layers of type Icon must have either an href or a primitive resource")}function j(r,e){return p(r,e).then(t=>{if(r.size==null)return t;const i=t[0]/t[1];return i>1?[r.size,r.size/i]:[r.size*i,r.size]})}function L(r){return d(r,{responseType:"image"}).then(e=>e.data)}function f(r,e){return S(r,e).then(t=>v(t))}async function B(r,e){const t=await f(r,e);return _(t,r)}async function S(r,e){var i;if(!r.isPrimitive){const o=w((i=r.resource)==null?void 0:i.href),u=s.get(o);if(u!==void 0)return u;const y=await h(()=>import("./objectResourceUtils-8909e8c3.js").then(l=>l.W),["./objectResourceUtils-8909e8c3.js","./devEnvironmentUtils-5002a058.js","./typedArrayUtil-ce39e5f4.js","./mat3-4fd89d48.js","./common-d0b63c2d.js","./mat3f64-50f3b9f6.js","./mat4-4714ff8c.js","./vec3-015ca254.js","./mat4f64-abdda1bb.js","./aaBoundingBox-04c58f5a.js","./Extent-680ef92a.js","./cast-8b575ab3.js","./string-7a324480.js","./Error-685fdf30.js","./ArrayPool-5813d861.js","./nextTick-3ee5a785.js","./promiseUtils-e37fe75d.js","./Ellipsoid-89682c5e.js","./aaBoundingRect-41e05474.js","./mathUtils-5b623c84.js","./vec4-c7a19f0d.js","./BufferView-da65c548.js","./vec2-8acac370.js","./vec33-8529ce65.js","./DefaultMaterial_COLOR_GAMMA-87d1f8e6.js","./types-e1c0a5bf.js","./request-fc61835a.js","./preload-helper-41c905a7.js","./asyncUtils-623987a8.js","./enums-fc527c7c.js","./Version-419f71e1.js","./quat-99c4e099.js","./quatf64-f8f1c132.js","./compilerUtils-175b9e40.js","./resourceUtils-527631ac.js","./basicInterfaces-7449a8bf.js","./Indices-37e06e9a.js","./DefaultMaterial.glsl-7d7dc23e.js","./ForwardLinearDepth.glsl-a0929473.js","./Matrix3PassUniform-0b3b1bba.js","./ShaderBuilder-7bfc11d2.js","./vec3f32-01c06d8d.js","./VertexAttribute-15d1866a.js","./View.glsl-03db830e.js","./mat4f32-60a2394b.js","./Texture2DPassUniform-70e1e126.js","./vec2f64-f35767d6.js","./MixExternalColor.glsl-99b269fe.js","./ShaderTechniqueConfiguration-ee770726.js","./symbolColorUtils-834d5fca.js","./PhysicallyBasedRendering.glsl-32dfb9c7.js","./FloatPassUniform-e3702139.js","./vec4f64-6d0e93be.js","./Float4PassUniform-7f3c3ce8.js","./RgbaFloatEncoding.glsl-4a25e2a7.js","./Texture2DDrawUniform-02720a73.js","./PiUtils.glsl-5ee49495.js","./VisualVariablePassParameters-8cb0a75a.js","./VertexElementDescriptor-2925c6af.js","./Texture-bf6b5582.js","./context-util-7ede29e5.js","./ViewingMode-5d7d590b.js","./Util-c12e93ba.js","./Slice.glsl-7975394d.js","./Transform.glsl-7294c426.js","./ObjectAndLayerIdColor.glsl-a64028da.js","./OutputDepth.glsl-f581dcdd.js","./OutputHighlight.glsl-08aacdf4.js","./VisualVariables.glsl-9e988d16.js","./DiscardOrAdjustAlphaBlend.glsl-f19054e7.js","./AlphaCutoff-96178e0d.js","./TransparencyPassType-a6b20292.js","./VertexColor.glsl-79a8c465.js","./VerticalOffset.glsl-5354e013.js","./Normals.glsl-0f400ece.js","./EvaluateSceneLighting.glsl-5da94bb7.js","./SSAOBlur.glsl-7265df26.js","./ScreenSpacePass.glsl-fee70090.js","./ReadLinearDepth.glsl-53a01bc1.js","./SSAO.glsl-c9cc39dd.js","./MultipassTerrainTest.glsl-43f42334.js","./vec2f32-eaf29605.js","./byteSizeEstimations-f0cab514.js","./Texture-87febf19.js","./Evented-d959ede6.js","./TextureOnly.glsl-548e665f.js","./assets-5052bbaa.js","./Attribute-f72d3f37.js","./sphere-8ab93b42.js","./lineSegment-b352e49e.js","./InterleavedLayout-d75b8228.js","./DefaultTechniqueConfiguration-5fedee5c.js","./RealisticTree.glsl-1e8f0ea9.js"],import.meta.url),c=await y.fetch(o,{disableTextures:!0});return s.put(o,c.referenceBoundingBox),c.referenceBoundingBox}let t=null;if(r.resource&&r.resource.primitive&&(t=z(g(r.resource.primitive)),m(e)))for(let o=0;o<t.length;o++)t[o]*=e;return t?Promise.resolve(t):Promise.reject(new n("symbol:invalid-resource","The symbol does not have a valid resource"))}export{K as clearBoundingBoxCache,p as computeIconLayerResourceSize,M as computeLayerResourceSize,N as computeLayerSize,f as computeObjectLayerResourceSize};
