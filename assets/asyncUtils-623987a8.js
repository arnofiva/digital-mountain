import{e as n,v as c,y as s,a as _}from"./cast-8b575ab3.js";import{t as f,r as l,w as m,p as y}from"./typedArrayUtil-ce39e5f4.js";import{v,E as h,w as b}from"./promiseUtils-e37fe75d.js";import"./ArrayPool-5813d861.js";function H(t,r,i){return h(t.map((o,a)=>r.apply(i,[o,a])))}async function x(t,r,i){return(await h(t.map((o,a)=>r.apply(i,[o,a])))).map(o=>o.value)}function u(t){return{ok:!0,value:t}}function p(t){return{ok:!1,error:t}}function d(t){return l(t)&&t.ok===!0?t.value:null}function w(t){return l(t)&&t.ok===!1?t.error:null}async function A(t){if(f(t))return{ok:!1,error:new Error("no promise provided")};try{return u(await t)}catch(r){return p(r)}}async function E(t){try{return u(await t)}catch(r){return b(r),p(r)}}function j(t){if(t.ok===!0)return t.value;throw t.error}function z(t,r){return new e(t,r)}let e=class extends c{get value(){return d(this._result)}get error(){return w(this._result)}get finished(){return l(this._result)}constructor(t,r){super({}),this._result=null,this._abortHandle=null,this.abort=()=>{this._abortController=m(this._abortController)},this.remove=this.abort,this._abortController=new AbortController;const{signal:i}=this._abortController;this.promise=t(i),this.promise.then(o=>{this._result=u(o),this._cleanup()},o=>{this._result=p(o),this._cleanup()}),this._abortHandle=v(r,this.abort)}normalizeCtorArgs(){return{}}destroy(){this.abort()}_cleanup(){this._abortHandle=y(this._abortHandle),this._abortController=null}};n([s()],e.prototype,"value",null),n([s()],e.prototype,"error",null),n([s()],e.prototype,"finished",null),n([s()],e.prototype,"promise",void 0),n([s()],e.prototype,"_result",void 0),e=n([_("esri.core.asyncUtils.ReactiveTask")],e);export{A as b,H as c,E as d,x as h,z as j,j as v};
