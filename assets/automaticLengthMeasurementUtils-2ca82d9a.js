import{e as a,y as m,a as g,v as gt}from"./JSONSupport-32b5ad86.js";import"./ensureType-249b88cd.js";import{l as yt,r as u,t as wt,o as nt,a as ot}from"./typedArrayUtil-70e1d79e.js";import{l as z,w as C}from"./reactiveUtils-e6d6c898.js";import"./Error-62cc7aff.js";import"./string-7a2f1d87.js";import"./intl-0ee83c79.js";import{i as Tt,x as at,F as Lt,S as Mt,k as xt,z as zt,c as ut,q as Ct,a as _}from"./quantityFormatUtils-fb5c2100.js";import{e as rt,W as I,n,p as Et,f as kt}from"./IdentityManager-844d980b.js";import{m as E}from"./number-2db5f4a2.js";import{h as vt,p as mt,R as M,d as R,j as Ot}from"./euclideanLengthMeasurementUtils-bdc56b7d.js";import{n as x}from"./vec3-015ca254.js";import{geodesicLength as ft}from"./geometryEngine-5399ce6b.js";import{U as lt,F as Rt}from"./projection-d42b91be.js";import{bt as Ht,ax as J,bu as Nt,ay as Pt}from"./index-8cd323f3.js";import{m as St,x as Vt,E as Ut}from"./Extent-2ad2c9a9.js";let w=class extends gt{constructor(t){super(t),this.helpMessage=void 0}};a([m()],w.prototype,"tooltipOptions",void 0),a([m()],w.prototype,"helpMessage",void 0),w=a([g("esri.views.interactive.tooltip.SketchTooltipInfo")],w);const b="esri-tooltip",l=`${b}-content`,Wt=`${b}-table`,At=`${b}-help-message`;let h=class extends I{get _units(){const t=Tt(this.tooltip.view);return{length:t,verticalLength:t,area:t}}_getHelpMessage(t){var tt,et,st,it;const{info:e}=this,{tooltipOptions:i,helpMessage:o,viewType:c}=e,p=(tt=i==null?void 0:i.visibleElements)==null?void 0:tt.helpMessage,v=t??o,bt=c==="3d"?"helpMessages3d":"helpMessages2d";return p&&v?(it=(st=(et=this._messagesTooltip)==null?void 0:et.sketch)==null?void 0:st[bt])==null?void 0:it[v]:void 0}_formatScale(t){return E(t,{style:"percent",maximumFractionDigits:0})}_formatRelativeOrientation(t){return E(t,{maximumFractionDigits:2,minimumFractionDigits:2,signDisplay:"exceptZero"})}_formatLength(t,e,i){return at(this._messagesUnits,t,yt(e,this._units.length),i)}_formatRelativeLength(t){return Lt(this._messagesUnits,t,this._units.length)}_formatVerticalLength(t){return Mt(this._messagesUnits,t,this._units.verticalLength)}_formatRelativeVerticalLength(t){return xt(this._messagesUnits,t,this._units.verticalLength)}_formatTotalLength(t){return at(this._messagesUnits,t,this._units.length)}_formatArea(t){return zt(this._messagesUnits,t,this._units.area)}_formatPercentage(t){return E(t.value,{style:"percent"})}};a([m()],h.prototype,"info",void 0),a([m()],h.prototype,"tooltip",void 0),a([m()],h.prototype,"_units",null),a([rt("esri/core/t9n/Units"),m()],h.prototype,"_messagesUnits",void 0),a([rt("esri/views/interactive/tooltip/t9n/Tooltip"),m()],h.prototype,"_messagesTooltip",void 0),h=a([g("esri.views.interactive.tooltip.content.TooltipContent")],h);function f({className:s,helpMessage:t},...e){const i=e.filter(o=>!!o);return n("div",{class:Et(s,l)},i.length>0?n("div",{class:Wt},...i):null,t?n("div",{key:"help-message",class:At},t):null)}const k=`${b}-field`,O={base:k,title:`${k}__title`,value:`${k}__value`};let r=class extends I{render(){return n("div",{class:O.base},n("div",{class:O.title},this.title),n("div",{class:O.value},this.value))}};a([m()],r.prototype,"title",void 0),a([m()],r.prototype,"value",void 0),r=a([g("esri.views.interactive.tooltip.support.TooltipField")],r);const Dt={base:`${b}-value-by-value`};let d=class extends I{constructor(){super(...arguments),this.divider="Ã—"}render(){return n("div",{class:Dt.base},n("span",null,this.left),n("span",null,this.divider),n("span",null,this.right))}};a([m()],d.prototype,"left",void 0),a([m()],d.prototype,"divider",void 0),a([m()],d.prototype,"right",void 0),d=a([g("esri.views.interactive.tooltip.support.ValueByValue")],d);const Ft={base:`${l} ${`${l}--draw-rectangle`}`};let H=class extends h{render(){const{area:t,radius:e,xSize:i,ySize:o,tooltipOptions:c}=this.info,{visibleElements:p}=c,v=this._messagesTooltip.sketch;return n(f,{className:Ft.base,helpMessage:this._getHelpMessage()},p.radius&&u(e)&&n(r,{title:v.radius,value:this._formatLength(e)}),p.size&&u(i)&&u(o)&&n(r,{title:v.size,value:n(d,{left:this._formatLength(i),right:this._formatLength(o)})}),p.area&&n(r,{title:v.area,value:this._formatArea(t)}))}};H=a([g("esri.views.interactive.tooltip.content.TooltipContentDrawCircle")],H);const Zt={base:`${l}--draw-point`};let N=class extends h{render(){const{elevation:t,tooltipOptions:e}=this.info,{visibleElements:i}=e,o=this._messagesTooltip.sketch;return n(f,{className:Zt.base,helpMessage:this._getHelpMessage()},i.elevation&&n(r,{title:o.elevation,value:this._formatVerticalLength(t)}))}};N=a([g("esri.views.interactive.tooltip.content.TooltipContentDrawPoint")],N);const jt={base:`${l} ${`${l}--draw-polygon`}`};let P=class extends h{render(){const{area:t,elevation:e,tooltipOptions:i,viewType:o}=this.info,{visibleElements:c}=i,p=this._messagesTooltip.sketch;return n(f,{className:jt.base,helpMessage:this._getHelpMessage()},c.elevation&&o!=="2d"&&n(r,{title:p.elevation,value:this._formatVerticalLength(e)}),c.area&&n(r,{title:p.area,value:this._formatArea(t)}))}};P=a([g("esri.views.interactive.tooltip.content.TooltipContentDrawPolygon")],P);const Gt={base:`${l} ${`${l}--draw-polyline`}`};let S=class extends h{render(){const{elevation:t,totalLength:e,tooltipOptions:i,viewType:o}=this.info,{visibleElements:c}=i,p=this._messagesTooltip.sketch;return n(f,{className:Gt.base,helpMessage:this._getHelpMessage()},c.elevation&&o!=="2d"&&n(r,{title:p.elevation,value:this._formatVerticalLength(t)}),c.totalLength&&n(r,{title:p.totalLength,value:this._formatLength(e)}))}};S=a([g("esri.views.interactive.tooltip.content.TooltipContentDrawPolyline")],S);const qt={base:`${l} ${`${l}--draw-rectangle`}`};let V=class extends h{render(){const{area:t,xSize:e,ySize:i,tooltipOptions:o}=this.info,{visibleElements:c}=o,p=this._messagesTooltip.sketch;return n(f,{className:qt.base,helpMessage:this._getHelpMessage()},c.size&&u(e)&&u(i)&&n(r,{title:p.size,value:n(d,{left:this._formatLength(e),right:this._formatLength(i)})}),c.area&&n(r,{title:p.area,value:this._formatArea(t)}))}};V=a([g("esri.views.interactive.tooltip.content.TooltipContentDrawRectangle")],V);const Xt={base:`${l} ${`${l}--extent-rotate`}`};let U=class extends h{render(){const{angle:t,tooltipOptions:e}=this.info,{visibleElements:i}=e,o=this._messagesTooltip.sketch;return n(f,{className:Xt.base,helpMessage:this._getHelpMessage()},i.rotation&&n(r,{title:o.rotation,value:this._formatRelativeOrientation(t)}))}};U=a([g("esri.views.interactive.tooltip.content.TooltipContentExtentRotate")],U);const Yt={base:`${l} ${`${l}--extent-scale`}`};let W=class extends h{render(){const t=this.info,{visibleElements:e}=t.tooltipOptions,i=this._messagesTooltip.sketch;return n(f,{className:Yt.base,helpMessage:this._getHelpMessage()},e.size&&n(r,{title:i.size,value:n(d,{left:this._formatLength(t.xSize),right:this._formatLength(t.ySize)})}),e.scale&&n(r,{title:i.scale,value:n(d,{left:this._formatScale(t.xScale),right:this._formatScale(t.yScale)})}))}};W=a([g("esri.views.interactive.tooltip.content.TooltipContentExtentScale")],W);const Bt={base:`${l} ${`${l}--reshape-edge-offset`}`};let A=class extends h{render(){const{area:t,distance:e,totalLength:i,tooltipOptions:o}=this.info,{visibleElements:c}=o,p=this._messagesTooltip.sketch;return n(f,{className:Bt.base,helpMessage:this._getHelpMessage()},c.distance&&n(r,{title:p.distance,value:this._formatRelativeLength(e)}),c.area&&u(t)&&n(r,{title:p.area,value:this._formatArea(t)}),c.totalLength&&u(i)&&n(r,{title:p.totalLength,value:this._formatLength(i)}))}};A=a([g("esri.views.interactive.tooltip.content.TooltipContentReshapeEdgeOffset")],A);const It={base:`${l} ${`${l}--transform-absolute`}`};let D=class extends h{render(){const{info:t}=this,{visibleElements:e}=t.tooltipOptions,i=this._messagesTooltip.sketch;return n(f,{className:It.base,helpMessage:this._getHelpMessage()},e.orientation&&t.orientationEnabled&&n(r,{title:i.orientation,value:ut(t.orientation,t.rotationType,t.orientationPrecision)}),e.size&&t.sizeEnabled&&n(r,{title:i.size,value:this._formatLength(t.size,t.sizeUnit,t.sizePrecision)}))}};D=a([g("esri.views.interactive.tooltip.content.TooltipContentTransformAbsolute")],D);const Jt={base:`${l} ${`${l}--transform-rotate`}`};let F=class extends h{render(){const{info:t}=this,{visibleElements:e}=t.tooltipOptions,i=this._messagesTooltip.sketch;return n(f,{className:Jt.base,helpMessage:this._getHelpMessage()},e.rotation&&n(r,{title:i.rotation,value:Ct(t.rotation,t.rotationType,t.rotationPrecision)}),e.orientation&&n(r,{title:i.orientation,value:ut(t.orientation,t.rotationType,t.orientationPrecision)}))}};F=a([g("esri.views.interactive.tooltip.content.TooltipContentTransformRotate")],F);const Kt={base:`${l} ${`${l}--transform-scale`}`};let Z=class extends h{render(){const{scale:t,size:e,sizePrecision:i,sizeUnit:o,tooltipOptions:c}=this.info,{visibleElements:p}=c,v=this._messagesTooltip.sketch;return n(f,{className:Kt.base,helpMessage:this._getHelpMessage()},p.scale&&n(r,{title:v.scale,value:this._formatPercentage(t)}),p.size&&n(r,{title:v.size,value:this._formatLength(e,o,i)}))}};Z=a([g("esri.views.interactive.tooltip.content.TooltipContentTransformScale")],Z);const Qt={base:`${l} ${`${l}--translate-graphic`}`};let j=class extends h{render(){const{info:t}=this,{visibleElements:e}=t.tooltipOptions,i=this._messagesTooltip.sketch;return n(f,{className:Qt.base,helpMessage:this._getHelpMessage()},e.distance&&n(r,{title:i.distance,value:this._formatLength(t.distance)}))}};j=a([g("esri.views.interactive.tooltip.content.TooltipContentTranslateGraphic")],j);const te={base:`${l} ${`${l}--translate-graphic-xy`}`};let G=class extends h{render(){const{info:t}=this,{visibleElements:e}=t.tooltipOptions,i=this._messagesTooltip.sketch;return n(f,{className:te.base,helpMessage:this._getHelpMessage()},e.distance&&n(r,{title:i.distance,value:this._formatRelativeLength(t.distance)}))}};G=a([g("esri.views.interactive.tooltip.content.TooltipContentTranslateGraphicXY")],G);const ee={base:`${l} ${`${l}--translate-graphic-z`}`};let q=class extends h{render(){const{info:s}=this,{visibleElements:t}=s.tooltipOptions,e=this._messagesTooltip.sketch;return n(f,{className:ee.base,helpMessage:this._getHelpMessage()},t.distance&&n(r,{title:e.distance,value:this._formatRelativeVerticalLength(s.distance)}))}};q=a([g("esri.views.interactive.tooltip.content.TooltipContentTranslateGraphicZ")],q);const se={base:`${l} ${`${l}--translate-vertex`}`};let X=class extends h{render(){const{distance:t,elevation:e,area:i,totalLength:o,tooltipOptions:c}=this.info,{visibleElements:p}=c,v=this._messagesTooltip.sketch;return n(f,{className:se.base,helpMessage:this._getHelpMessage()},p.distance&&n(r,{title:v.distance,value:this._formatLength(t)}),p.elevation&&u(e)&&n(r,{title:v.elevation,value:this._formatVerticalLength(e)}),p.area&&u(i)&&n(r,{title:v.area,value:this._formatArea(i)}),p.totalLength&&u(o)&&n(r,{title:v.totalLength,value:this._formatLength(o)}))}};X=a([g("esri.views.interactive.tooltip.content.TooltipContentTranslateVertex")],X);const ie={base:`${l} ${`${l}--translate-vertex`}`};let Y=class extends h{render(){const{area:t,distance:e,elevation:i,totalLength:o,tooltipOptions:c}=this.info,{visibleElements:p}=c,v=this._messagesTooltip.sketch;return n(f,{className:ie.base,helpMessage:this._getHelpMessage()},p.distance&&n(r,{title:v.distance,value:this._formatRelativeLength(e)}),p.elevation&&u(i)&&n(r,{title:v.elevation,value:this._formatVerticalLength(i)}),p.area&&u(t)&&n(r,{title:v.area,value:this._formatArea(t)}),p.totalLength&&u(o)&&n(r,{title:v.totalLength,value:this._formatLength(o)}))}};Y=a([g("esri.views.interactive.tooltip.content.TooltipContentTranslateVertexXY")],Y);const ne={base:`${l} ${`${l}--translate-vertex`}`};let B=class extends h{render(){const{distance:s,elevation:t,tooltipOptions:e}=this.info,{visibleElements:i}=e,o=this._messagesTooltip.sketch;return n(f,{className:ne.base,helpMessage:this._getHelpMessage()},i.distance&&n(r,{title:o.distance,value:this._formatRelativeVerticalLength(s)}),i.elevation&&u(t)&&n(r,{title:o.elevation,value:this._formatVerticalLength(t)}))}};B=a([g("esri.views.interactive.tooltip.content.TooltipContentTranslateVertexZ")],B);function oe(s,t){if(wt(t))return null;const e=document.createElement("div");switch(t.type){case"draw-point":return new N({tooltip:s,info:t,container:e});case"draw-polygon":return new P({tooltip:s,info:t,container:e});case"draw-polyline":return new S({tooltip:s,info:t,container:e});case"draw-rectangle":return new V({tooltip:s,info:t,container:e});case"draw-circle":return new H({tooltip:s,info:t,container:e});case"extent-rotate":return new U({tooltip:s,info:t,container:e});case"extent-scale":return new W({tooltip:s,info:t,container:e});case"transform-absolute":return new D({tooltip:s,info:t,container:e});case"transform-rotate":return new F({tooltip:s,info:t,container:e});case"transform-scale":return new Z({tooltip:s,info:t,container:e});case"translate-graphic":return new j({tooltip:s,info:t,container:e});case"translate-graphic-z":return new q({tooltip:s,info:t,container:e});case"translate-graphic-xy":return new G({tooltip:s,info:t,container:e});case"translate-vertex":return new X({tooltip:s,info:t,container:e});case"translate-vertex-z":return new B({tooltip:s,info:t,container:e});case"translate-vertex-xy":return new Y({tooltip:s,info:t,container:e});case"reshape-edge-offset":return new A({tooltip:s,info:t,container:e})}}const ae={base:`${b}`};let $=class extends gt{constructor(t){super(t),this.info=null,this._contentContainer=(()=>{const e=document.createElement("div");return e.classList.add(ae.base),e})(),this._contentWidget=null}initialize(){const t=this._contentContainer;this.addHandles([z(()=>{var e;return(e=this.view.overlay)==null?void 0:e.surface},e=>{t.remove(),nt(e,i=>i.appendChild(t))},C),z(()=>this.info,(e,i)=>{u(this._contentWidget)&&u(e)&&u(i)&&e.type===i.type?this._contentWidget.info=e:(this._contentWidget=ot(this._contentWidget),nt(oe(this,e),o=>{this._contentWidget=o,o.container&&t.appendChild(o.container)}))},C),z(()=>({container:this._contentContainer,contentWidget:this._contentWidget,screenPoint:this._screenPoint}),re,C)])}destroy(){this._contentWidget=ot(this._contentWidget),this._contentContainer.remove()}clear(){this.info=null}get _screenPoint(){const t=this.view.inputManager;return t!=null&&t.multiTouchActive?null:t==null?void 0:t.latestPointerLocation}get test(){var t;return{contentContainer:this._contentContainer,visible:((t=this._contentContainer)==null?void 0:t.style.display)!=="none"}}};function re({container:s,contentWidget:t,screenPoint:e}){const{style:i}=s;if(u(e)&&u(t)){i.display="block";const o=kt(s),c=`translate(${Math.round(e.x)+ct[0]*(o?-1:1)}px, ${Math.round(e.y)+ct[1]}px)`;i.transform=o?`translate(-100%, 0) ${c}`:c}else i.display="none"}a([m({nonNullable:!0})],$.prototype,"view",void 0),a([m()],$.prototype,"info",void 0),a([m()],$.prototype,"_contentContainer",void 0),a([m()],$.prototype,"_contentWidget",void 0),a([m()],$.prototype,"_screenPoint",null),$=a([g("esri.views.interactive.tooltip.Tooltip")],$);const ct=[20,20];function dt(s,t,e,i,...o){return St(s)&&Ht(s)?t.apply(void 0,o):Vt(s)?e.apply(void 0,o):i.apply(void 0,o)}function $t(s){const{spatialReference:t}=s;return dt(t,he,ge,ue,s)}function _t(s,t){if(!Ut(s.spatialReference,t.spatialReference))return null;const{spatialReference:e}=s;return T[0]=s.x,T[1]=s.y,T[2]=s.hasZ?s.z:0,L[0]=t.x,L[1]=t.y,L[2]=t.hasZ?t.z:0,K(T,L,e)}function K(s,t,e){return dt(e,le,ce,pe,s,t,e)}function le(s,t,e){return _(J(Q,s,t,e).distance,"meters")}function ce(s,t,e){return _(ft(ve(s,t,e),"meters"),"meters")}function pe(s,t,e){return lt(s,e,pt)&&lt(t,e,ht)?_(J(Q,pt,ht).distance,"meters"):null}function he(s){return _(Nt([s],"meters")[0],"meters")}function ge(s){return _(ft(s,"meters"),"meters")}function ue(s){const t=[];if(!Rt(s,t))return null;let e=0;for(const i of t){let o=0;for(let c=1;c<i.length;++c)o+=J(Q,i[c-1],i[c]).distance;e+=o}return _(e,"meters")}function ve(s,t,e){return{type:"polyline",spatialReference:e,paths:[[[...s],[...t]]]}}const Q=new Pt,T=x(),L=x(),pt=x(),ht=x();function Je(s,t){return y(mt,$t,vt,t,s)}function Ke(s,t,e,i){return y(Ot,K,R,i,s,t,e)}function Qe(s,t,e){return y(M,_t,M,e,s,t)}function ts(s,t,e,i){return y(R,K,R,i,s,t,e)}function es(s){return y(mt,$t,vt,"on-the-ground",s)}function ss(s,t){return y(M,_t,M,"on-the-ground",s,t)}function y(s,t,e,i,...o){if(i==="on-the-ground"){const c=t.apply(void 0,o);return u(c)?c:e.apply(void 0,o)}return s.apply(void 0,o)}export{Qe as a,$ as b,es as c,Ke as d,ts as g,ss as h,K as l,Je as m,dt as r,w as t};
