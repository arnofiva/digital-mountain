import{t as f,r as i,l}from"./typedArrayUtil-70e1d79e.js";import{r as m}from"./ElevationInfo-bc15f954.js";function d(e){return e?x:P}function b(e,t){return f(t)||!t.mode?d(e).mode:t.mode}function E(e,t){return i(t)?t:d(e)}function g(e,t){return b(!!i(e)&&e.hasZ,t)}function w(e,t){return E(!!i(e)&&!!e.hasZ,t)}function p(e){const t=v(e);return g(e.geometry,t)}function R(e){const t=v(e),n=g(e.geometry,t);return{mode:n,offset:i(t)&&n!=="on-the-ground"?l(t.offset,0)*m(l(t.unit,"meters")):0}}function z(e){if(p(e)==="on-the-ground")return!1;const t=v(e),n=i(t)&&t.featureExpressionInfo?t.featureExpressionInfo.expression:null;return!(!n||n==="0")}function v(e){return e.layer&&"elevationInfo"in e.layer?e.layer.elevationInfo:null}function j(e,t,n){if(f(n)||!n.mode)return;const o=e.hasZ?e.z:0,r=i(n.offset)?n.offset:0;switch(n.mode){case"absolute-height":return o-r;case"on-the-ground":return 0;case"relative-to-ground":return o-(l(t.elevationProvider.getElevation(e.x,e.y,o,e.spatialReference,"ground"),0)+r);case"relative-to-scene":return o-(l(t.elevationProvider.getElevation(e.x,e.y,o,e.spatialReference,"scene"),0)+r)}}function k(e,t,n,o=null){return h(e,t.x,t.y,t.hasZ?t.z:0,t.spatialReference,n,o)}function q(e,t,n,o,r=null){return h(e,t[0],t[1],t.length>2?t[2]:0,n,o,r)}function h(e,t,n,o,r,a,u=null){if(f(a))return;const s=i(u)?u.mode:"absolute-height";if(s==="on-the-ground")return 0;const{absoluteZ:c}=Z(t,n,o,r,e,a);return y(c,t,n,o,r,e,u,s)}function Z(e,t,n,o,r,a){const u=i(a.offset)?a.offset:0;switch(a.mode){case"absolute-height":return{absoluteZ:n+u,elevation:0};case"on-the-ground":{const s=l(r.elevationProvider.getElevation(e,t,0,o,"ground"),0);return{absoluteZ:s,elevation:s}}case"relative-to-ground":{const s=l(r.elevationProvider.getElevation(e,t,n,o,"ground"),0);return{absoluteZ:n+s+u,elevation:s}}case"relative-to-scene":{const s=l(r.elevationProvider.getElevation(e,t,n,o,"scene"),0);return{absoluteZ:n+s+u,elevation:s}}}}function y(e,t,n,o,r,a,u,s){const c=i(u)&&i(u.offset)?u.offset:0;switch(s){case"absolute-height":return e-c;case"relative-to-ground":return e-(l(a.elevationProvider.getElevation(t,n,o,r,"ground"),0)+c);case"relative-to-scene":return e-(l(a.elevationProvider.getElevation(t,n,o,r,"scene"),0)+c)}}function A(e,t){if(f(t))return!1;const{mode:n}=t;return i(n)&&(e==="scene"&&n==="relative-to-scene"||e==="ground"&&n!=="absolute-height")}const x={mode:"absolute-height",offset:0},P={mode:"on-the-ground",offset:null};export{x as E,P as Z,w as a,Z as b,z as c,j as d,R as f,k as g,q as h,g as i,p as l,E as s,b as u,A as y};
