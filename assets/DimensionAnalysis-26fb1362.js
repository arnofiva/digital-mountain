import{u as P,e as t,y as o,a as h,s as j}from"./JSONSupport-32b5ad86.js";import{c as R}from"./Analysis-ba6617ff.js";import{l as a}from"./Color-5a385b27.js";import{l as b}from"./Clonable-95fa5d2d.js";import{o as g,e as N}from"./screenUtils-410d12c0.js";import{T as c,a as q}from"./ensureType-249b88cd.js";import{t as y,r as n,e as z}from"./typedArrayUtil-70e1d79e.js";import"./geometry-f89ca072.js";import{s as D}from"./Cyclical-34b2a5e3.js";import{w as v,e as x}from"./Extent-2ad2c9a9.js";import{j as E}from"./Collection-9e42cc30.js";import{t as S,n as _}from"./collectionUtils-61fc1a27.js";import{l as k,w as C}from"./reactiveUtils-e6d6c898.js";import{o as O}from"./projection-d42b91be.js";let i=class extends P(b){constructor(e){super(e),this.type="simple",this.color=new a("black"),this.lineSize=2,this.fontSize=10,this.textColor=new a("black"),this.textBackgroundColor=new a([255,255,255,.6])}};t([o({type:["simple"],readOnly:!0,json:{write:{isRequired:!0}}})],i.prototype,"type",void 0),t([o({type:a,nonNullable:!0,json:{type:[c],write:{isRequired:!0}}})],i.prototype,"color",void 0),t([o({type:Number,cast:g,nonNullable:!0,range:{min:N(1)},json:{write:{isRequired:!0}}})],i.prototype,"lineSize",void 0),t([o({type:Number,cast:g,nonNullable:!0,json:{write:{isRequired:!0}}})],i.prototype,"fontSize",void 0),t([o({type:a,nonNullable:!0,json:{type:[c],write:{isRequired:!0}}})],i.prototype,"textColor",void 0),t([o({type:a,nonNullable:!0,json:{type:[c],write:{isRequired:!0}}})],i.prototype,"textBackgroundColor",void 0),i=t([h("esri.analysis.DimensionSimpleStyle")],i);const $=i;var u;(function(e){e.Horizontal="horizontal",e.Vertical="vertical",e.Direct="direct"})(u||(u={}));const T=[u.Horizontal,u.Vertical,u.Direct];let s=class extends P(b){constructor(e){super(e),this.type="length",this.startPoint=null,this.endPoint=null,this.measureType=u.Direct,this.offset=0,this.orientation=0}};t([o({type:["length"],json:{write:{isRequired:!0}}})],s.prototype,"type",void 0),t([o({type:v,json:{write:!0}})],s.prototype,"startPoint",void 0),t([o({type:v,json:{write:!0}})],s.prototype,"endPoint",void 0),t([o({type:T,nonNullable:!0,json:{write:{isRequired:!0}}})],s.prototype,"measureType",void 0),t([o({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}})],s.prototype,"offset",void 0),t([o({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),j(e=>D.normalize(q(e),0,!0))],s.prototype,"orientation",void 0),s=t([h("esri.analysis.LengthDimension")],s);const H=s,f=E.ofType(H);let r=class extends R{constructor(e){super(e),this.type="dimension",this.style=new $,this.extent=null}initialize(){this.addHandles(k(()=>this._computeExtent(),e=>{(y(e)||y(e.pending))&&this._set("extent",n(e)?e.extent:null)},C))}get dimensions(){return this._get("dimensions")||new f}set dimensions(e){this._set("dimensions",_(e,this.dimensions,f))}get spatialReference(){for(const e of this.dimensions){if(n(e.startPoint))return e.startPoint.spatialReference;if(n(e.endPoint))return e.endPoint.spatialReference}return null}get requiredPropertiesForEditing(){return this.dimensions.reduce((e,p)=>(e.push(p.startPoint,p.endPoint),e),[])}async waitComputeExtent(){const e=this._computeExtent();return n(e)?z(e.pending):Promise.resolve()}_computeExtent(){const e=this.spatialReference;if(y(e))return{pending:null,extent:null};const p=[];for(const l of this.dimensions)n(l.startPoint)&&p.push(l.startPoint),n(l.endPoint)&&p.push(l.endPoint);const d=O(p,e);if(n(d.pending))return{pending:d.pending,extent:null};let w=null;return n(d.geometries)&&(w=d.geometries.reduce((l,m)=>y(l)?n(m)?x.fromPoint(m):null:n(m)?l.union(x.fromPoint(m)):l,null)),{pending:null,extent:w}}clear(){this.dimensions.removeAll()}};t([o({type:["dimension"]})],r.prototype,"type",void 0),t([o({cast:S,type:f,nonNullable:!0})],r.prototype,"dimensions",null),t([o({readOnly:!0})],r.prototype,"spatialReference",null),t([o({types:{key:"type",base:null,typeMap:{simple:$}},nonNullable:!0})],r.prototype,"style",void 0),t([o({value:null,readOnly:!0})],r.prototype,"extent",void 0),t([o({readOnly:!0})],r.prototype,"requiredPropertiesForEditing",null),r=t([h("esri.analysis.DimensionAnalysis")],r);const Y=r;export{$ as a,Y as j,T as r,u as t,H as u};
