import{_ as h}from"./preload-helper-41c905a7.js";import{U as d}from"./request-f01affa1.js";import{a as n}from"./Error-62cc7aff.js";import{e as b}from"./ItemCache-47345b61.js";import{r as m,c as w}from"./typedArrayUtil-70e1d79e.js";import{F as v,a as z}from"./aaBoundingBox-dfb04110.js";import{t as _,c as g}from"./symbolLayerUtils3D-5a2f49a8.js";import"./string-7a2f1d87.js";import"./promiseUtils-59dab60c.js";import"./MemCache-a072224a.js";import"./JSONSupport-32b5ad86.js";import"./ensureType-249b88cd.js";import"./nextTick-3ee5a785.js";import"./Extent-2ad2c9a9.js";import"./Ellipsoid-89682c5e.js";import"./aaBoundingRect-42f9721f.js";import"./mathUtils-5b623c84.js";import"./vec3-015ca254.js";import"./common-d0b63c2d.js";import"./vec4-c7a19f0d.js";let s=a();function a(){return new b(50)}function K(){s=a()}function M(r,e){if(r.type==="icon")return p(r,e);if(r.type==="object")return f(r,e);throw new n("symbol3d:unsupported-symbol-layer","computeLayerSize only works with symbol layers of type Icon and Object")}async function N(r,e){if(r.type==="icon")return j(r,e);if(r.type==="object")return B(r,e);throw new n("symbol3d:unsupported-symbol-layer","computeLayerSize only works with symbol layers of type Icon and Object")}async function p(r,e){var t,i;if((t=r.resource)!=null&&t.href)return L(r.resource.href).then(o=>[o.width,o.height]);if((i=r.resource)!=null&&i.primitive)return m(e)?[e,e]:[256,256];throw new n("symbol3d:invalid-symbol-layer","symbol layers of type Icon must have either an href or a primitive resource")}function j(r,e){return p(r,e).then(t=>{if(r.size==null)return t;const i=t[0]/t[1];return i>1?[r.size,r.size/i]:[r.size*i,r.size]})}function L(r){return d(r,{responseType:"image"}).then(e=>e.data)}function f(r,e){return S(r,e).then(t=>v(t))}async function B(r,e){const t=await f(r,e);return _(t,r)}async function S(r,e){var i;if(!r.isPrimitive){const o=w((i=r.resource)==null?void 0:i.href),u=s.get(o);if(u!==void 0)return u;const y=await h(()=>import("./objectResourceUtils-f1a10a8c.js").then(l=>l.W),["./objectResourceUtils-f1a10a8c.js","./devEnvironmentUtils-5002a058.js","./typedArrayUtil-70e1d79e.js","./mat3-4fd89d48.js","./common-d0b63c2d.js","./mat3f64-50f3b9f6.js","./mat4-4714ff8c.js","./vec3-015ca254.js","./mat4f64-abdda1bb.js","./aaBoundingBox-dfb04110.js","./Extent-2ad2c9a9.js","./JSONSupport-32b5ad86.js","./string-7a2f1d87.js","./ensureType-249b88cd.js","./Error-62cc7aff.js","./nextTick-3ee5a785.js","./promiseUtils-59dab60c.js","./Ellipsoid-89682c5e.js","./aaBoundingRect-42f9721f.js","./mathUtils-5b623c84.js","./vec4-c7a19f0d.js","./BufferView-da65c548.js","./vec2-8acac370.js","./vec33-6cea25ab.js","./DefaultMaterial_COLOR_GAMMA-8afda99b.js","./types-e1c0a5bf.js","./request-f01affa1.js","./preload-helper-41c905a7.js","./asyncUtils-8de18dd2.js","./enums-fc527c7c.js","./Version-b7702d36.js","./quat-99c4e099.js","./quatf64-f8f1c132.js","./compilerUtils-2eb56463.js","./resourceUtils-527631ac.js","./basicInterfaces-7449a8bf.js","./Indices-7097baff.js","./DefaultMaterial.glsl-0c704a85.js","./ForwardLinearDepth.glsl-3606f02d.js","./Matrix3PassUniform-285be0f9.js","./ShaderBuilder-c7fc4a30.js","./vec3f32-01c06d8d.js","./VertexAttribute-15d1866a.js","./View.glsl-725bf3cf.js","./mat4f32-60a2394b.js","./Texture2DPassUniform-1510cbb0.js","./vec2f64-f35767d6.js","./MixExternalColor.glsl-96fc9ef8.js","./ShaderTechniqueConfiguration-5b4afc58.js","./symbolColorUtils-7c94928f.js","./PhysicallyBasedRendering.glsl-d72e2a11.js","./FloatPassUniform-8a52db3d.js","./vec4f64-6d0e93be.js","./Float4PassUniform-52993952.js","./RgbaFloatEncoding.glsl-31b2b966.js","./Texture2DDrawUniform-d1eaa0d6.js","./PiUtils.glsl-9dc0973a.js","./VisualVariablePassParameters-ded3d86d.js","./VertexElementDescriptor-2925c6af.js","./Texture-42bd3a76.js","./context-util-eb98c678.js","./ViewingMode-5d7d590b.js","./Util-c12e93ba.js","./Slice.glsl-e5fdd8d3.js","./Transform.glsl-e6366353.js","./ObjectAndLayerIdColor.glsl-751e40ac.js","./OutputDepth.glsl-ccbc6366.js","./OutputHighlight.glsl-569dde3f.js","./VisualVariables.glsl-655a358f.js","./DiscardOrAdjustAlphaBlend.glsl-27b032af.js","./AlphaCutoff-96178e0d.js","./TransparencyPassType-a1cb0602.js","./VertexColor.glsl-e2eb2da5.js","./VerticalOffset.glsl-2b654767.js","./Normals.glsl-81bc0899.js","./EvaluateSceneLighting.glsl-ed7fcdc2.js","./SSAOBlur.glsl-2bfd75b0.js","./ScreenSpacePass.glsl-28a2b6e5.js","./ReadLinearDepth.glsl-9abddde9.js","./SSAO.glsl-1d087e8c.js","./MultipassTerrainTest.glsl-029ffa3f.js","./vec2f32-eaf29605.js","./byteSizeEstimations-f0cab514.js","./Texture-2b2e584f.js","./Evented-36093e88.js","./TextureOnly.glsl-12d60c43.js","./assets-640b4d04.js","./Attribute-f72d3f37.js","./sphere-092242fd.js","./lineSegment-8ffcb750.js","./InterleavedLayout-d75b8228.js","./DefaultTechniqueConfiguration-d3c0bf46.js","./RealisticTree.glsl-f514fb19.js"],import.meta.url),c=await y.fetch(o,{disableTextures:!0});return s.put(o,c.referenceBoundingBox),c.referenceBoundingBox}let t=null;if(r.resource&&r.resource.primitive&&(t=z(g(r.resource.primitive)),m(e)))for(let o=0;o<t.length;o++)t[o]*=e;return t?Promise.resolve(t):Promise.reject(new n("symbol:invalid-resource","The symbol does not have a valid resource"))}export{K as clearBoundingBoxCache,p as computeIconLayerResourceSize,M as computeLayerResourceSize,N as computeLayerSize,f as computeObjectLayerResourceSize};
