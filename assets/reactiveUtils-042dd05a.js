import{e as d,r as j,p as w,a as p,v as h}from"./promiseUtils-e37fe75d.js";import{T as L,z as U,n as q}from"./cast-8b575ab3.js";import{p as a}from"./typedArrayUtil-ce39e5f4.js";import"./string-7a324480.js";import"./Error-685fdf30.js";function v(e,o,r={}){return m(e,o,r,$)}function k(e,o,r={}){return m(e,o,r,y)}function m(e,o,r={},n){let i=null;const u=r.once?(t,l)=>{n(t)&&(a(i),o(t,l))}:(t,l)=>{n(t)&&o(t,l)};if(i=L(e,u,r.sync,r.equals),r.initial){const t=e();u(t,t)}return i}function B(e,o,r,n={}){let i=null,u=null,t=null;function l(){var c;i&&u&&(u.remove(),(c=n.onListenerRemove)==null||c.call(n,i),i=null,u=null)}function f(c){n.once&&n.once&&a(t),r(c)}const P=v(e,(c,z)=>{var s;l(),d(c)&&(i=c,u=j(c,o,f),(s=n.onListenerAdd)==null||s.call(n,c))},{sync:n.sync,initial:!0});return t=q(()=>{P.remove(),l()}),t}function C(e,o){return x(e,y,o)}function x(e,o,r){if(w(r))return Promise.reject(p());const n=e();if(o!=null&&o(n))return Promise.resolve(n);let i=null;function u(){i=a(i)}return new Promise((t,l)=>{i=U([h(r,()=>{u(),l(p())}),m(e,f=>{u(),t(f)},{sync:!1,once:!0},o??$)])})}function $(e){return!0}function y(e){return!!e}function D(e,o,r={}){let n=!1;const i=v(e,(u,t)=>{n||o(u,t)},r);return{remove(){i.remove()},pause(){n=!0},resume(){n=!1}}}const E={sync:!0},F={initial:!0},G={sync:!0,initial:!0};export{D as P,E as U,B as a,k as f,F as h,C as j,v as l,G as w};
