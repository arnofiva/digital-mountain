import{B as o,z as s,an as T,l as d,r as u,G as m,ao as f,ap as A,b as l,Q as w,aq as g,ar as x,as as F,at as I,au as O,y as j,av as D,aw as y}from"./arcadeUtils-150aa9fc.js";import{t as p,e as v}from"./executionError-fb3f283a.js";import"./geometry-f89ca072.js";import"./ensureType-249b88cd.js";import"./string-7a2f1d87.js";import"./typedArrayUtil-70e1d79e.js";import"./Error-62cc7aff.js";import"./Extent-2ad2c9a9.js";import"./JSONSupport-32b5ad86.js";import"./nextTick-3ee5a785.js";import"./promiseUtils-59dab60c.js";import"./Ellipsoid-89682c5e.js";import"./Polyline-cf51ad23.js";import"./typeUtils-05f9d41d.js";import"./preload-helper-41c905a7.js";import"./ArcadeDate-3d8ef842.js";import"./datetime-b6333958.js";import"./number-9d73a551.js";import"./locale-30120714.js";import"./Field-efd8d6fa.js";import"./enumeration-504d95a2.js";import"./fieldType-ec749512.js";import"./jsonUtils-6d0a72e3.js";import"./featureConversionUtils-66a9b1ed.js";import"./aaBoundingBox-dfb04110.js";import"./aaBoundingRect-42f9721f.js";import"./mathUtils-5b623c84.js";import"./vec3-015ca254.js";import"./common-d0b63c2d.js";import"./vec4-c7a19f0d.js";import"./OptimizedFeature-cb86a86f.js";import"./OptimizedFeatureSet-1d1ac4b9.js";import"./request-f01affa1.js";import"./hash-0ddfbf4b.js";import"./Portal-52d960e8.js";import"./Loadable-7c3ecd79.js";import"./Promise-3959c3ee.js";import"./PortalGroup-b49a7409.js";import"./PortalUser-85cf1ca9.js";import"./sizeVariableUtils-d4870b0d.js";function b(r,n){return r&&r.domain?r.domain.type==="coded-value"||r.domain.type==="codedValue"?l.convertObjectToArcadeDictionary({type:"codedValue",name:r.domain.name,dataType:y[r.field.type],codedValues:r.domain.codedValues.map(e=>({name:e.name,code:e.code}))},w(n)):l.convertObjectToArcadeDictionary({type:"range",name:r.domain.name,dataType:y[r.field.type],min:r.domain.min,max:r.domain.max},w(n)):null}function lt(r){r.mode==="async"&&(r.functions.domain=function(n,e){return r.standardFunctionAsync(n,e,async(a,c,t)=>{if(o(t,2,3,n,e),s(t[0]))return b(T(t[0],u(t[1]),t[2]===void 0?void 0:d(t[2])),n);if(m(t[0]))return await t[0]._ensureLoaded(),b(f(u(t[1]),t[0],null,t[2]===void 0?void 0:d(t[2])),n);throw new p(n,v.InvalidParameter,e)})},r.functions.subtypes=function(n,e){return r.standardFunctionAsync(n,e,async(a,c,t)=>{if(o(t,1,1,n,e),s(t[0])){const i=A(t[0]);return i?l.convertObjectToArcadeDictionary(i,w(n)):null}if(m(t[0])){await t[0]._ensureLoaded();const i=t[0].subtypes();return i?l.convertObjectToArcadeDictionary(i,w(n)):null}throw new p(n,v.InvalidParameter,e)})},r.functions.domainname=function(n,e){return r.standardFunctionAsync(n,e,async(a,c,t)=>{if(o(t,2,4,n,e),s(t[0]))return g(t[0],u(t[1]),t[2],t[3]===void 0?void 0:d(t[3]));if(m(t[0])){await t[0]._ensureLoaded();const i=f(u(t[1]),t[0],null,t[3]===void 0?void 0:d(t[3]));return x(i,t[2])}throw new p(n,v.InvalidParameter,e)})},r.signatures.push({name:"domainname",min:2,max:4}),r.functions.domaincode=function(n,e){return r.standardFunctionAsync(n,e,async(a,c,t)=>{if(o(t,2,4,n,e),s(t[0]))return F(t[0],u(t[1]),t[2],t[3]===void 0?void 0:d(t[3]));if(m(t[0])){await t[0]._ensureLoaded();const i=f(u(t[1]),t[0],null,t[3]===void 0?void 0:d(t[3]));return I(i,t[2])}throw new p(n,v.InvalidParameter,e)})},r.signatures.push({name:"domaincode",min:2,max:4})),r.functions.text=function(n,e){return r.standardFunctionAsync(n,e,(a,c,t)=>{if(o(t,1,2,n,e),!m(t[0]))return O(t[0],t[1]);{const i=j(t[1],"");if(i==="")return t[0].castToText();if(i.toLowerCase()==="schema")return t[0].convertToText("schema",a.abortSignal);if(i.toLowerCase()==="featureset")return t[0].convertToText("featureset",a.abortSignal)}})},r.functions.gdbversion=function(n,e){return r.standardFunctionAsync(n,e,async(a,c,t)=>{if(o(t,1,1,n,e),s(t[0]))return t[0].gdbVersion();if(m(t[0]))return(await t[0].load()).gdbVersion;throw new p(n,v.InvalidParameter,e)})},r.functions.schema=function(n,e){return r.standardFunctionAsync(n,e,async(a,c,t)=>{if(o(t,1,1,n,e),m(t[0]))return await t[0].load(),l.convertObjectToArcadeDictionary(t[0].schema(),w(n));if(s(t[0])){const i=D(t[0]);return i?l.convertObjectToArcadeDictionary(i,w(n)):null}throw new p(n,v.InvalidParameter,e)})}}export{lt as registerFunctions};
