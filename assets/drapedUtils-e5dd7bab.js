import"./geometry-f89ca072.js";import{t as h,r as M}from"./typedArrayUtil-70e1d79e.js";import{e as m,$ as c}from"./Extent-2ad2c9a9.js";function u(e,t){return t?"xoffset"in t&&t.xoffset?Math.max(e,Math.abs(t.xoffset)):"yoffset"in t&&t.yoffset?Math.max(e,Math.abs(t.yoffset||0)):e:e}function b(e){let t=0,n=0;for(let s=0;s<e.length;s++){const r=e[s].size;typeof r=="number"&&(t+=r,n++)}return t/n}function p(e,t){return typeof e=="number"?e:e&&e.stops&&e.stops.length?b(e.stops):t}function v(e,t){if(!t)return e;const n=t.filter(o=>o.type==="size").map(o=>{const{maxSize:a,minSize:f}=o;return(p(a,e)+p(f,e))/2});let s=0;const r=n.length;if(r===0)return e;for(let o=0;o<r;o++)s+=n[o];const i=Math.floor(s/r);return Math.max(i,e)}function $(e){var r;const t=e&&e.renderer,n=(e&&e.event&&e.event.pointerType)==="touch"?9:6;if(!t)return n;const s="visualVariables"in t?v(n,t.visualVariables):n;if(t.type==="simple")return u(s,t.symbol);if(t.type==="unique-value"){let i=s;return(r=t.uniqueValueInfos)==null||r.forEach(o=>{i=u(i,o.symbol)}),i}if(t.type==="class-breaks"){let i=s;return t.classBreakInfos.forEach(o=>{i=u(i,o.symbol)}),i}return t.type==="dot-density"||t.type,s}function d(e,t,n,s=new m){let r=0;if(n.type==="2d")r=t*(n.resolution??0);else if(n.type==="3d"){const x=n.overlayPixelSizeInMapUnits(e),l=n.basemapSpatialReference;r=M(l)&&!l.equals(n.spatialReference)?c(l)/c(n.spatialReference):t*x}const i=e.x-r,o=e.y-r,a=e.x+r,f=e.y+r,{spatialReference:y}=n;return s.xmin=Math.min(i,a),s.ymin=Math.min(o,f),s.xmax=Math.max(i,a),s.ymax=Math.max(o,f),s.spatialReference=y,s}function q(e,t,n){const s=n.toMap(e);return h(s)?!1:d(s,$(),n,z).intersects(t)}const z=new m;export{d as a,q as o,$ as s};
