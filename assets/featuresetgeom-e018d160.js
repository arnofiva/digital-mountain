import{t as p,e as u}from"./executionError-fb3f283a.js";import{u as R,B as y,r as f,G as a,am as d}from"./arcadeUtils-150aa9fc.js";import{e as l,c as w}from"./SpatialFilter-71f2f7d8.js";import{p as s}from"./Extent-2ad2c9a9.js";import{R as F,m as I,S as A,x as P,O as g,p as C,h}from"./geometryEngineAsync-a77d823a.js";import"./geometry-f89ca072.js";import"./ensureType-249b88cd.js";import"./string-7a2f1d87.js";import"./typedArrayUtil-70e1d79e.js";import"./Error-62cc7aff.js";import"./Polyline-cf51ad23.js";import"./JSONSupport-32b5ad86.js";import"./nextTick-3ee5a785.js";import"./promiseUtils-59dab60c.js";import"./typeUtils-05f9d41d.js";import"./preload-helper-41c905a7.js";import"./ArcadeDate-3d8ef842.js";import"./datetime-b6333958.js";import"./number-9d73a551.js";import"./locale-30120714.js";import"./Field-efd8d6fa.js";import"./enumeration-504d95a2.js";import"./fieldType-ec749512.js";import"./jsonUtils-6d0a72e3.js";import"./featureConversionUtils-66a9b1ed.js";import"./aaBoundingBox-dfb04110.js";import"./aaBoundingRect-42f9721f.js";import"./mathUtils-5b623c84.js";import"./vec3-015ca254.js";import"./common-d0b63c2d.js";import"./vec4-c7a19f0d.js";import"./OptimizedFeature-cb86a86f.js";import"./OptimizedFeatureSet-1d1ac4b9.js";import"./request-f01affa1.js";import"./hash-0ddfbf4b.js";import"./Portal-52d960e8.js";import"./Loadable-7c3ecd79.js";import"./Promise-3959c3ee.js";import"./PortalGroup-b49a7409.js";import"./PortalUser-85cf1ca9.js";import"./Ellipsoid-89682c5e.js";import"./sizeVariableUtils-d4870b0d.js";import"./WhereClause-ec2695a9.js";import"./arcadeTimeUtils-ff4f0a96.js";import"./FieldsIndex-3347fdc5.js";import"./fieldUtils-e397be4b.js";import"./arcadeOnDemand-5c3ab3f7.js";import"./TimeReference-dbe22fa2.js";import"./Clonable-95fa5d2d.js";import"./workers-591e0dfc.js";import"./Connection-000cba43.js";import"./assets-640b4d04.js";import"./intl-0ee83c79.js";import"./number-2db5f4a2.js";import"./messages-f54f7f46.js";function c(n){return n instanceof s}function o(n,e,i,m){return m(n,e,async(S,t,r)=>{if(r.length<2)throw new p(n,u.WrongNumberOfParameters,e);if((r=R(r))[0]===null&&r[1]===null)return!1;if(a(r[0])){if(r[1]instanceof s)return new w({parentfeatureset:r[0],relation:i,relationGeom:r[1]});if(r[1]===null)return new l({parentfeatureset:r[0]});throw new p(n,u.InvalidParameter,e)}if(c(r[0])){if(c(r[1])){switch(i){case"esriSpatialRelEnvelopeIntersects":return h(d(r[0]),d(r[1]));case"esriSpatialRelIntersects":return h(r[0],r[1]);case"esriSpatialRelContains":return C(r[0],r[1]);case"esriSpatialRelOverlaps":return g(r[0],r[1]);case"esriSpatialRelWithin":return P(r[0],r[1]);case"esriSpatialRelTouches":return A(r[0],r[1]);case"esriSpatialRelCrosses":return I(r[0],r[1])}throw new p(n,u.InvalidParameter,e)}if(a(r[1]))return new w({parentfeatureset:r[1],relation:i,relationGeom:r[0]});if(r[1]===null)return!1;throw new p(n,u.InvalidParameter,e)}if(r[0]!==null)throw new p(n,u.InvalidParameter,e);return a(r[1])?new l({parentfeatureset:r[1]}):!(r[1]instanceof s||r[1]===null)&&void 0})}function xr(n){n.mode==="async"&&(n.functions.intersects=function(e,i){return o(e,i,"esriSpatialRelIntersects",n.standardFunctionAsync)},n.functions.envelopeintersects=function(e,i){return o(e,i,"esriSpatialRelEnvelopeIntersects",n.standardFunctionAsync)},n.signatures.push({name:"envelopeintersects",min:2,max:2}),n.functions.contains=function(e,i){return o(e,i,"esriSpatialRelContains",n.standardFunctionAsync)},n.functions.overlaps=function(e,i){return o(e,i,"esriSpatialRelOverlaps",n.standardFunctionAsync)},n.functions.within=function(e,i){return o(e,i,"esriSpatialRelWithin",n.standardFunctionAsync)},n.functions.touches=function(e,i){return o(e,i,"esriSpatialRelTouches",n.standardFunctionAsync)},n.functions.crosses=function(e,i){return o(e,i,"esriSpatialRelCrosses",n.standardFunctionAsync)},n.functions.relate=function(e,i){return n.standardFunctionAsync(e,i,(m,S,t)=>{if(t=R(t),y(t,3,3,e,i),c(t[0])&&c(t[1]))return F(t[0],t[1],f(t[2]));if(t[0]instanceof s&&t[1]===null||t[1]instanceof s&&t[0]===null)return!1;if(a(t[0])&&t[1]===null)return new l({parentfeatureset:t[0]});if(a(t[1])&&t[0]===null)return new l({parentfeatureset:t[1]});if(a(t[0])&&t[1]instanceof s)return t[0].relate(t[1],f(t[2]));if(a(t[1])&&t[0]instanceof s)return t[1].relate(t[0],f(t[2]));if(t[0]===null&&t[1]===null)return!1;throw new p(e,u.InvalidParameter,i)})})}export{xr as registerFunctions};
