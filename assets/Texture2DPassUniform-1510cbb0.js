import{r as $}from"./typedArrayUtil-70e1d79e.js";import{r as p}from"./vec2-8acac370.js";import{f as h,n as S}from"./vec2f64-f35767d6.js";import{i as v,b as x,a as c}from"./ShaderBuilder-c7fc4a30.js";let m=class extends v{constructor(t,n){super(t,"vec2",x.Pass,(r,s,i)=>r.setUniform2fv(t,n(s,i)))}};const z="Size",f="InvSize";function C(e,t,n=!1,r=0){if(e.hasWebGL2Context){const s=c`vec2(textureSize(${t}, ${c.int(r)}))`;return n?"(1.0 / "+s+")":s}return n?t+f:t+z}function D(e,t,n,r=null,s=0){if(e.hasWebGL2Context)return c`texelFetch(${t}, ivec2(${n}), ${c.int(s)})`;let i=c`texture2D(${t}, ${n} * `;return i+=r?c`(${r}))`:c`${t+f})`,i}var u;(function(e){e[e.None=0]="None",e[e.Size=1]="Size",e[e.InvSize=2]="InvSize"})(u||(u={}));class l extends v{constructor(t,n){super(t,"sampler2D",x.Pass,(r,s,i)=>r.bindTexture(t,n(s,i)))}}function G(e,t,n=u.None){const r=[new l(e,t)];if(n&u.Size){const s=e+z;r.push(new m(s,(i,a)=>{const o=t(i,a);return $(o)?p(d,o.descriptor.width,o.descriptor.height):h}))}if(n&u.InvSize){const s=e+f;r.push(new m(s,(i,a)=>{const o=t(i,a);return $(o)?p(d,1/o.descriptor.width,1/o.descriptor.height):h}))}return r}const d=S();export{u as a,m as e,l as f,D as i,f as n,C as r,z as t,G as u};
